"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),DynamicForms=function(){function e(){_classCallCheck(this,e),this.dynamic_elements={},this.elements={},this.templates={}}return _createClass(e,[{key:"automaticallySetupForm",value:function(){$("[data-dynamic-form] [data-dynamic-form-template]").each(function(e,t){var a=$(t),n=a.parent();this.setupForm(n,a)}.bind(this))}},{key:"setupForm",value:function(t,a){a.detach();var n=a.data("dynamic-form-fill");if(void 0===n)this.createNewRow(t,a);else for(var i in n)n.hasOwnProperty(i)&&(console.log(i),this.createNewRow(t,a,i,n[i]));e.disableTopRemoveButton(t)}},{key:"createNewRow",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=a.clone(),r=a.data("dynamic-form-template");void 0===this.templates[r]?this.templates[r]=0:this.templates[r]++,o.removeAttr("data-dynamic-form-template"),o.removeAttr("data-dynamic-form-fill");var m=void 0;o.find("[data-dynamic-form-input]").each(function(t,a){var o=$(a),r=o.attr("name");m=void 0===this.dynamic_elements[r];var s=o.data("dynamic-form-input");void 0!==i&&o.val(i);var c=void 0;void 0===n?(void 0===this.dynamic_elements[r]?this.dynamic_elements[r]=0:this.dynamic_elements[r]++,c=r.replace(s,e.numToChar(this.dynamic_elements[r]))):void 0!==n&&(void 0===this.elements[r]?this.elements[r]=0:this.elements[r]++,c=r.replace(s,this.elements[r])),o.attr("name",c)}.bind(this)),o.find("[data-dynamic-form-add]").each(function(e,n){var i=$(n);i.attr("data-dynamic-form-add",this.getDataTagForButton(r,"add")),i.click(function(){this.createNewRow(t,a)}.bind(this))}.bind(this)),o.find("[data-dynamic-form-remove]").each(function(a,n){var i=$(n);i.attr("data-dynamic-form-remove",this.getDataTagForButton(r,"remove")),i.click(function(){o.remove(),e.disableTopRemoveButton(t)}.bind(this))}.bind(this)),o.show(),o.appendTo(t)}},{key:"getDataTagForButton",value:function(e,t){return e+"-"+t+"-"+this.templates[e]}}],[{key:"disableTopRemoveButton",value:function(e){e.find("[data-dynamic-form-remove]").first().hide()}},{key:"numToChar",value:function(e){var t="abcdefghijklmnopqrstuvwxyz",a="";for(e++;e>0;){e--;var n=e%t.length;a=t[n]+a,e=(e-n)/t.length}return a}}]),e}();window.DynamicForms=DynamicForms;